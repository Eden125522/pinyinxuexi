<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI æ±‰å­—ç¬”ç”»å­¦ä¹ </title>
    <!-- å¼•å…¥ Hanzi Writer åº“ -->
    <script src="https://cdn.jsdelivr.net/npm/hanzi-writer@3.5/dist/hanzi-writer.min.js"></script>
    <!-- å¼•å…¥ æ‹¼éŸ³åº“ -->
    <script src="https://unpkg.com/pinyin-pro"></script>
    <style>
        body {
            font-family: 'KaiTi', 'æ¥·ä½“', sans-serif;
            background-color: #fdfdfd;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding-top: 50px;
        }

        h1 { color: #333; margin-bottom: 20px; }

        /* è¾“å…¥åŒºåŸŸ */
        .input-area { margin-bottom: 30px; display: flex; gap: 10px; }
        input {
            padding: 10px;
            font-size: 18px;
            border: 2px solid #ddd;
            border-radius: 8px;
            width: 200px;
            text-align: center;
        }
        button {
            padding: 10px 20px;
            background-color: #e74c3c;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover { background-color: #c0392b; }

        /* æ‹¼éŸ³æ˜¾ç¤º */
        #pinyin-display {
            font-size: 36px;
            color: #555;
            margin-bottom: 10px;
            font-weight: bold;
            min-height: 50px;
        }

        /* ç”°å­—æ ¼å®¹å™¨ */
        #character-target {
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            background-color: #fff;
        }

        /* æ§åˆ¶æŒ‰é’® */
        .controls { margin-top: 20px; }
        .btn-secondary {
            background-color: #3498db;
            margin: 0 5px;
        }
    </style>
</head>
<body>

    <h1>ğŸ–Œï¸ æ±‰å­—ç¬”ç”» AI å­¦ä¹ </h1>

    <div class="input-area">
        <input type="text" id="charInput" placeholder="è¾“å…¥ä¸€ä¸ªæ±‰å­— (å¦‚: é¾™)" maxlength="1">
        <button onclick="renderCharacter()">ç”Ÿæˆ</button>
    </div>

    <div id="pinyin-display"></div>
    <div id="character-target"></div>

    <div class="controls">
        <button class="btn-secondary" onclick="writer.animateCharacter()">ğŸ¥ é‡æ’­åŠ¨ç”»</button>
        <button class="btn-secondary" onclick="speakCharacter()">ğŸ”Š æœ—è¯»å‘éŸ³</button>
        <button class="btn-secondary" onclick="writer.quiz()">âœï¸ å¼€å¯æµ‹éªŒæ¨¡å¼</button>
    </div>

    <script>
        let writer;
        let currentChar = '';

        function renderCharacter() {
            const input = document.getElementById('charInput').value;
            if (!input) return;
            
            // è·å–ç¬¬ä¸€ä¸ªæ±‰å­—
            const char = input[0];
            currentChar = char;

            // 1. æ¸…ç©ºæ—§å†…å®¹
            document.getElementById('character-target').innerHTML = '';
            document.getElementById('pinyin-display').innerHTML = '';

            // 2. ç”Ÿæˆæ‹¼éŸ³ (ä½¿ç”¨ pinyin-pro åº“)
            const pinyinText = pinyinPro.pinyin(char);
            document.getElementById('pinyin-display').innerText = pinyinText;

            // 3. åˆå§‹åŒ– Hanzi Writer
            // width/height: ç”»å¸ƒå¤§å°
            // padding: å†…è¾¹è·
            // showOutline: æ˜¯å¦æ˜¾ç¤ºç°è‰²åº•ç¨¿
            // strokeColor: ç¬”ç”»é¢œè‰²
            writer = HanziWriter.create('character-target', char, {
                width: 300,
                height: 300,
                padding: 20,
                showOutline: true,
                strokeAnimationSpeed: 1, // åŠ¨ç”»é€Ÿåº¦
                delayBetweenStrokes: 200, // ç¬”ç”»é—´éš”
                strokeColor: '#333',
                radicalColor: '#e74c3c', // éƒ¨é¦–å¯ä»¥å˜è‰²ï¼ˆé«˜çº§åŠŸèƒ½ï¼‰
                
                // ä¸‹é¢é…ç½®ç”°å­—æ ¼æ ·å¼
                showCharacter: false, // åˆå§‹ä¸æ˜¾ç¤ºå­—ï¼Œç­‰åŠ¨ç”»
                backgroundGrids: {
                    stroke: '#e09090', // ç”°å­—æ ¼çº¿æ¡é¢œè‰²ï¼ˆçº¢è‰²ï¼‰
                    lineWidth: 1,
                    dashArray: [5, 5] // è™šçº¿
                }
            });

            // 4. å¼€å§‹åŠ¨ç”»å¹¶æœ—è¯»
            writer.animateCharacter();
            speakCharacter();
        }

        // è¯­éŸ³åˆæˆåŠŸèƒ½
        function speakCharacter() {
            if (!currentChar) return;
            const utterance = new SpeechSynthesisUtterance(currentChar);
            utterance.lang = 'zh-CN';
            utterance.rate = 0.8; // è¯­é€Ÿç¨æ…¢
            window.speechSynthesis.speak(utterance);
        }

        // åˆå§‹åŒ–é»˜è®¤å±•ç¤ºä¸€ä¸ªå­—
        document.getElementById('charInput').value = 'çˆ±';
        renderCharacter();
    </script>
</body>
</html>